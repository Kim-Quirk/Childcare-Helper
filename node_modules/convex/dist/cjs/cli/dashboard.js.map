{
  "version": 3,
  "sources": ["../../../src/cli/dashboard.ts"],
  "sourcesContent": ["import { Command } from \"commander\";\nimport chalk from \"chalk\";\nimport { ProjectConfig, readProjectConfig } from \"./lib/config.js\";\nimport open from \"open\";\nimport { Context, oneoffContext } from \"./lib/context.js\";\n\nexport const dashboard = new Command(\"dashboard\")\n  .description(\"Open the dashboard in the browser\")\n  .option(\n    \"--no-open\",\n    \"Don't automatically open the dashboard in the default browser\"\n  )\n  .action(async options => {\n    const ctx = oneoffContext;\n    const loginUrl = await dashboardUrl(ctx);\n\n    if (options.open) {\n      console.log(chalk.gray(`Opening ${loginUrl} in the default browser...`));\n      await open(loginUrl);\n    } else {\n      console.log(loginUrl);\n    }\n  });\n\nexport async function dashboardUrl(\n  ctx: Context,\n  includeDeployment = true\n): Promise<string> {\n  const { projectConfig } = await readProjectConfig(ctx);\n  return dashboardUrlForConfig(projectConfig, includeDeployment);\n}\n\nexport async function dashboardUrlForConfig(\n  projectConfig: ProjectConfig,\n  includeDeployment = true\n): Promise<string> {\n  const { project, team, prodUrl } = projectConfig;\n  const host = process.env.CONVEX_PROVISION_HOST\n    ? \"http://localhost:3000\"\n    : \"https://dashboard.convex.dev\";\n\n  // in local dev we don't know the deployment name\n  if (process.env.CONVEX_PROVISION_HOST) {\n    return host;\n  }\n\n  const deployment = prodUrl.match(/https?:\\/\\/([^.]*)[.]/)![1];\n  return `${host}/t/${team}/${project}${\n    includeDeployment ? `/${deployment}` : \"\"\n  }`;\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAAwB;AACxB,mBAAkB;AAClB,oBAAiD;AACjD,kBAAiB;AACjB,qBAAuC;AAEhC,MAAM,YAAY,IAAI,yBAAQ,WAAW,EAC7C,YAAY,mCAAmC,EAC/C;AAAA,EACC;AAAA,EACA;AACF,EACC,OAAO,OAAM,YAAW;AACvB,QAAM,MAAM;AACZ,QAAM,WAAW,MAAM,aAAa,GAAG;AAEvC,MAAI,QAAQ,MAAM;AAChB,YAAQ,IAAI,aAAAA,QAAM,KAAK,WAAW,oCAAoC,CAAC;AACvE,cAAM,YAAAC,SAAK,QAAQ;AAAA,EACrB,OAAO;AACL,YAAQ,IAAI,QAAQ;AAAA,EACtB;AACF,CAAC;AAEH,eAAsB,aACpB,KACA,oBAAoB,MACH;AACjB,QAAM,EAAE,cAAc,IAAI,UAAM,iCAAkB,GAAG;AACrD,SAAO,sBAAsB,eAAe,iBAAiB;AAC/D;AAEA,eAAsB,sBACpB,eACA,oBAAoB,MACH;AACjB,QAAM,EAAE,SAAS,MAAM,QAAQ,IAAI;AACnC,QAAM,OAAO,QAAQ,IAAI,wBACrB,0BACA;AAGJ,MAAI,QAAQ,IAAI,uBAAuB;AACrC,WAAO;AAAA,EACT;AAEA,QAAM,aAAa,QAAQ,MAAM,uBAAuB,EAAG;AAC3D,SAAO,GAAG,UAAU,QAAQ,UAC1B,oBAAoB,IAAI,eAAe;AAE3C;",
  "names": ["chalk", "open"]
}
