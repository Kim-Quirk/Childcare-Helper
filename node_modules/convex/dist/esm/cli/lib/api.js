"use strict";
import chalk from "chalk";
import { bigBrainAPI, bigBrainAPIMaybeThrows } from "./utils.js";
export async function getUrlAndAdminKey(ctx, projectSlug, teamSlug, deploymentType) {
  const authorizeArgs = {
    projectSlug,
    teamSlug,
    deploymentType
  };
  const data = await bigBrainAPI(
    ctx,
    "POST",
    "deployment/authorize",
    authorizeArgs
  );
  const adminKey = data.adminKey;
  const url = data.url;
  if (adminKey === void 0 || url === void 0) {
    const msg = "Unknown error during authorization: " + JSON.stringify(data);
    console.error(chalk.red(msg));
    return await ctx.crash(1, "transient", new Error(msg));
  }
  return { adminKey, url };
}
export async function getDevDeploymentMaybeThrows(ctx, args) {
  return await bigBrainAPIMaybeThrows(ctx, "PUT", "dev_deployment", args);
}
//# sourceMappingURL=api.js.map
